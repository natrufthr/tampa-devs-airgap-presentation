# Deployment configuration
deployment:
  enabled: true
  kind: Deployment
  replicas: 2

# Image configuration - clear digest to avoid multi-arch issues
image:
  registry: docker.io
  repository: traefik
  tag: "v3.1.2"
  pullPolicy: IfNotPresent

# Service configuration
service:
  enabled: true
  type: NodePort  # Change to NodePort for on-prem
  annotations: {}

# Ports configuration
ports:
  web:
    port: 8000
    exposedPort: 80
    expose:
      default: true
    protocol: TCP
  websecure:
    port: 8443
    exposedPort: 443
    expose:
      default: true
    protocol: TCP
    tls:
      enabled: true
  metrics:
    port: 9100
    expose:
      default: false
    protocol: TCP

# Dashboard configuration (disable in production)
ingressRoute:
  dashboard:
    enabled: true
    matchRule: PathPrefix(`/dashboard`) || PathPrefix(`/api`)
    entryPoints: ["websecure"]

# Providers
providers:
  kubernetesCRD:
    enabled: true
    allowCrossNamespace: true
  kubernetesIngress:
    enabled: true
    allowExternalNameServices: true

# Logs
logs:
  general:
    level: INFO
  access:
    enabled: false

# Resources
resources:
  requests:
    cpu: "100m"
    memory: "50Mi"
  limits:
    cpu: "300m"
    memory: "150Mi"

# Security
securityContext:
  capabilities:
    drop: [ALL]
  readOnlyRootFilesystem: true
  runAsGroup: 65532
  runAsNonRoot: true
  runAsUser: 65532

podSecurityContext:
  fsGroup: 65532
